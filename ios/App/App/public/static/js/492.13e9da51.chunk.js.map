{"version":3,"file":"static/js/492.13e9da51.chunk.js","mappings":"oQA2FA,UA1E4B,WAC1B,IAAQA,GAAOC,EAAAA,EAAAA,MAAPD,GACFE,GAAWC,EAAAA,EAAAA,MAEXC,GAAUC,EAAAA,EAAAA,IAA6B,CAC3CC,UAAUC,EAAAA,EAAAA,GAAYC,EAAAA,MAItBC,EAGEL,EAHFK,MACAC,EAEEN,EAFFM,aACaC,EACXP,EADFQ,UAAaD,OAGf,GACEE,EAAAA,EAAAA,KAA6B,CAC3BC,UAAW,CAAEC,OAAQ,CAAEf,GAAAA,IACvBgB,MAAOhB,IAHHiB,KAAR,gBAA2C,GAA3C,GAAgBC,gBAAAA,OAAhB,MAAkC,KAAlC,EAMA,GAA2BC,EAAAA,EAAAA,KAAiC,CAC1DC,YAAa,kBAAMlB,EAAS,kCADvBmB,GAAP,eAgCA,OAbAC,EAAAA,EAAAA,YAAU,WACgB,IAAD,IAAjBJ,GACJT,EAAM,CACJc,SAAU,CACRC,MAAqB,OAAfN,QAAe,IAAfA,OAAA,EAAAA,EAAiBM,OAAQ,GAC/BC,UAAyB,OAAfP,QAAe,IAAfA,GAAA,UAAAA,EAAiBQ,oBAAjB,eAA+B1B,KAAM,GAC/C2B,MAAqB,OAAfT,QAAe,IAAfA,GAAA,UAAAA,EAAiBS,YAAjB,eAAuB3B,KAAM,IAErC4B,aAA4B,OAAfV,QAAe,IAAfA,OAAA,EAAAA,EAAiBW,UAAW,OAG5C,CAACX,EAAiBT,KAGnB,SAAC,MAAD,kBAAkBL,GAAlB,cACE,kBAAM0B,UAAU,aAAhB,WACE,SAAC,KAAD,CACEC,MAAM,aACNC,OAAQhC,EACR8B,WAAWG,EAAAA,EAAAA,IAAOtB,EAAOY,UAAY,yBAHvC,UAKE,SAAC,KAAD,OAEF,SAAC,KAAD,CACEQ,MAAM,eACND,WAAWG,EAAAA,EAAAA,IAAOtB,EAAOiB,aAAe,yBAF1C,UAIE,SAAC,KAAD,OAEF,SAAC,KAAD,CAAaM,SAAUxB,GA5CN,SAAC,GAGI,IAF1BkB,EAEyB,EAFzBA,YAEyB,IADzBL,SAAYC,EACa,EADbA,KAAMC,EACO,EADPA,SAAUE,EACH,EADGA,KAE5BN,GACEc,EAAAA,EAAAA,KAAO,QACLX,KAAAA,EACAK,QAASD,EACTF,aAAc,CAAE1B,GAAIyB,GACpBE,KAAM,CAAE3B,GAAI2B,MACNT,GAAmB,CAAElB,GAAE,OAAEkB,QAAF,IAAEA,OAAF,EAAEA,EAAiBlB","sources":["admin/pages/Forms/CreateUserFormsPage.tsx"],"sourcesContent":["import { joiResolver } from '@hookform/resolvers/joi';\r\nimport { ReactElement, useEffect } from 'react';\r\nimport { FormProvider, useForm } from 'react-hook-form';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n  useGetUserTemplateAdminQuery,\r\n  useSaveUserTemplateAdminMutation,\r\n} from '../../../GraphQl/graphql';\r\nimport { Accordion, FormActions } from '../../components/molecules';\r\nimport {\r\n  DescriptionFrom,\r\n  UserFormsForm,\r\n  UserFormsFormInputs,\r\n} from '../../components/organisms';\r\nimport { gqlVar, twClsx } from '../../utils';\r\nimport { UserFormsFormSchema } from '../../validations';\r\n\r\nconst CreateUserFormsPage = (): ReactElement => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const methods = useForm<UserFormsFormInputs>({\r\n    resolver: joiResolver(UserFormsFormSchema),\r\n  });\r\n\r\n  const {\r\n    reset,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = methods;\r\n\r\n  const { data: { getUserTemplate = null } = {} } =\r\n    useGetUserTemplateAdminQuery({\r\n      variables: { entity: { id } },\r\n      skip: !id,\r\n    });\r\n\r\n  const [saveUserTemplate] = useSaveUserTemplateAdminMutation({\r\n    onCompleted: () => navigate('/admin/forms/user-templates'),\r\n  });\r\n\r\n  const handleOnSubmit = ({\r\n    description,\r\n    baseData: { name, category, user },\r\n  }: UserFormsFormInputs) => {\r\n    saveUserTemplate(\r\n      gqlVar({\r\n        name,\r\n        content: description,\r\n        templateType: { id: category },\r\n        user: { id: user },\r\n        ...(!!getUserTemplate && { id: getUserTemplate?.id }),\r\n      })\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!!getUserTemplate) {\r\n      reset({\r\n        baseData: {\r\n          name: getUserTemplate?.name || '',\r\n          category: getUserTemplate?.templateType?.id || '',\r\n          user: getUserTemplate?.user?.id || '',\r\n        },\r\n        description: getUserTemplate?.content || '',\r\n      });\r\n    }\r\n  }, [getUserTemplate, reset]);\r\n\r\n  return (\r\n    <FormProvider {...methods}>\r\n      <form className=\"min-h-full\">\r\n        <Accordion\r\n          title=\"Stammdaten\"\r\n          open={!!id}\r\n          className={twClsx(errors.baseData && 'border border-primary')}\r\n        >\r\n          <UserFormsForm />\r\n        </Accordion>\r\n        <Accordion\r\n          title=\"Beschreibung\"\r\n          className={twClsx(errors.description && 'border border-primary')}\r\n        >\r\n          <DescriptionFrom />\r\n        </Accordion>\r\n        <FormActions onSubmit={handleSubmit(handleOnSubmit)} />\r\n      </form>\r\n    </FormProvider>\r\n  );\r\n};\r\n\r\nexport default CreateUserFormsPage;\r\n"],"names":["id","useParams","navigate","useNavigate","methods","useForm","resolver","joiResolver","UserFormsFormSchema","reset","handleSubmit","errors","formState","useGetUserTemplateAdminQuery","variables","entity","skip","data","getUserTemplate","useSaveUserTemplateAdminMutation","onCompleted","saveUserTemplate","useEffect","baseData","name","category","templateType","user","description","content","className","title","open","twClsx","onSubmit","gqlVar"],"sourceRoot":""}