"use strict";(self.webpackChunkjugendwerkstatt=self.webpackChunkjugendwerkstatt||[]).push([[447],{69447:function(e,l,n){n.r(l),n.d(l,{default:function(){return w}});var o=n(29439),i=n(72791),a=n(35820),s=n(61134),r=n(16871),t=n(1841),u=n(1413),d=n(45987),v=n(61596),c=n(17402),f=n(80184),m=["onGetValues"],h=(0,c.ZP)(),b=function(e){var l=e.onGetValues,n=(0,d.Z)(e,m);return(0,f.jsx)(v.ZP,(0,u.Z)({isMulti:!0,onChange:function(e,n){l&&l(e)},components:h},n))},p=n(7043),g=n(4819),j=n.n(g),x=j().object({roles:j().array().items(j().object({label:j().string(),value:j().string()})).min(1).messages({"array.min":"Mindestens eine Rolle sollte ausgew\xe4hlt werden"})}),w=function(){var e,l,n,u=(0,r.UO)().id,d=(0,r.s0)(),v=(0,s.cI)({resolver:(0,a.L)(x),defaultValues:{roles:[{label:"",value:""}]}}),c=v.reset,m=v.setValue,h=v.getValues,g=v.handleSubmit,j=v.formState.errors,w=(0,t.YmP)().data,V=(0,t.ozh)({fetchPolicy:"cache-and-network",variables:{id:u}}),k=V.data,y=(k=void 0===k?{}:k).user,Z=void 0===y?null:y,C=V.loading,P=(0,t.dUE)({onCompleted:function(){return d("/admin/users")}}),S=(0,o.Z)(P,1)[0];(0,i.useEffect)((function(){var e;u&&c({roles:null===Z||void 0===Z||null===(e=Z.roles)||void 0===e?void 0:e.map((function(e){return{value:(null===e||void 0===e?void 0:e.id)||"",label:(null===e||void 0===e?void 0:e.name)||""}}))})}),[u,c,null===Z||void 0===Z?void 0:Z.roles]);var G=(null===w||void 0===w||null===(e=w.roles)||void 0===e||null===(l=e.result)||void 0===l?void 0:l.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id}})))||[];return C?(0,f.jsx)("p",{children:"loading..."}):(0,f.jsx)(p.UQ,{title:"".concat(null===Z||void 0===Z?void 0:Z.fullname," Rolle zuweisen"),open:!0,children:(0,f.jsxs)("form",{className:"min-h-full",children:[h("roles")&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b,{options:G,defaultValue:h("roles"),isSearchable:!1,onGetValues:function(e){return m("roles",e,{shouldValidate:!0})}}),j&&(0,f.jsx)("span",{className:"text-primary",children:null===(n=j.roles)||void 0===n?void 0:n.message})]}),(0,f.jsx)(p.iN,{onSubmit:g((function(e){var l=e.roles;S({variables:{entity:{id:u,roles:l.map((function(e){return{id:e.value}}))}}})}))})]})})}}}]);
//# sourceMappingURL=447.bba045a3.chunk.js.map