{"version":3,"file":"static/js/313.80b5e90b.chunk.js","mappings":"2RAEaA,EAAyBC,IAAAA,OAAW,CAC/CC,MAAOD,IAAAA,SAAaE,WAAWC,MAAM,SACrCC,QAASJ,IAAAA,SAAaE,WAAWC,MAAM,e,WCkEzC,EAxDyB,WAAqB,IAAD,IACnCE,GAAeC,EAAAA,EAAAA,MAAfD,WAER,GAKIE,EAAAA,EAAAA,IAA4B,CAC9BC,KAAM,WACNC,UAAUC,EAAAA,EAAAA,GAAYX,KANtBY,EADF,EACEA,MACAC,EAFF,EAEEA,SACAC,EAHF,EAGEA,aACaC,EAJf,EAIEC,UAAaD,OAKf,GAAyBE,EAAAA,EAAAA,KAA0B,CACjDC,YAAa,WACXN,IACAN,EAAW,CACTa,KAAMC,EAAAA,EAAAA,QACNf,QAAS,kDALRgB,GAAP,eAeA,OACE,6BACE,SAAC,KAAD,CACEnB,MAAM,mBACNoB,WAAWC,EAAAA,EAAAA,KACRR,EAAOb,OAASa,EAAOV,UAAY,yBAHxC,UAME,iBAAKiB,UAAU,YAAf,WACE,SAAC,MAAD,gBACEE,GAAG,QACHpB,MAAM,SACFS,EAAS,UAHf,IAIEY,MAAK,UAAEV,EAAOb,aAAT,aAAE,EAAcG,YAEvB,SAAC,MAAD,gBACEmB,GAAG,UACHpB,MAAM,aACFS,EAAS,YAHf,IAIEY,MAAK,UAAEV,EAAOV,eAAT,aAAE,EAAgBA,iBAK7B,SAAC,KAAD,CAAaqB,SAAUZ,GA7BJ,SAAC,GAAD,IAAGZ,EAAH,EAAGA,MAAgByB,EAAnB,EAAUtB,QAAV,OACrBgB,EAAe,CACbO,UAAW,CAAEvB,QAAS,CAAEH,MAAAA,EAAOyB,QAAAA,EAASR,KAAMU,EAAAA,IAAAA","sources":["admin/validations/PushMessagesForm.schema.ts","admin/pages/GeneralSettings/PushMessagesPage.tsx"],"sourcesContent":["import Joi from 'joi';\r\n\r\nexport const PushMessagesPageSchema = Joi.object({\r\n  title: Joi.string().required().label('Titel'),\r\n  message: Joi.string().required().label('Nachricht'),\r\n});\r\n","import { joiResolver } from '@hookform/resolvers/joi';\r\nimport { ReactElement } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport {\r\n  NotificationType,\r\n  useSendGlobalPushMutation,\r\n} from '../../../GraphQl/graphql';\r\nimport { SnackbarTypeEnum } from '../../../interfaces/enums/SnackbarType.enum';\r\nimport { snackbarStore } from '../../../store';\r\nimport { Accordion, FormActions, InputField } from '../../components/molecules';\r\nimport { twClsx } from '../../utils';\r\nimport { PushMessagesPageSchema } from '../../validations/PushMessagesForm.schema';\r\nimport { PushMessagesInputs } from './PushMessages.props';\r\n\r\nconst PushMessagesPage = (): ReactElement => {\r\n  const { handleOpen } = snackbarStore();\r\n\r\n  const {\r\n    reset,\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm<PushMessagesInputs>({\r\n    mode: 'onChange',\r\n    resolver: joiResolver(PushMessagesPageSchema),\r\n  });\r\n  const [sendGlobalPush] = useSendGlobalPushMutation({\r\n    onCompleted: () => {\r\n      reset();\r\n      handleOpen({\r\n        type: SnackbarTypeEnum.SUCCESS,\r\n        message: 'Push-Benachrichtigung erfolgreich gesendet',\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleOnSubmit = ({ title, message: content }: PushMessagesInputs) =>\r\n    sendGlobalPush({\r\n      variables: { message: { title, content, type: NotificationType.Global } },\r\n    });\r\n\r\n  return (\r\n    <form>\r\n      <Accordion\r\n        title=\"Push-Nachrichten\"\r\n        className={twClsx(\r\n          (errors.title || errors.message) && 'border border-primary'\r\n        )}\r\n      >\r\n        <div className=\"space-y-5\">\r\n          <InputField\r\n            id=\"title\"\r\n            label=\"Titel\"\r\n            {...register('title')}\r\n            error={errors.title?.message}\r\n          />\r\n          <InputField\r\n            id=\"message\"\r\n            label=\"Nachricht\"\r\n            {...register('message')}\r\n            error={errors.message?.message}\r\n          />\r\n        </div>\r\n      </Accordion>\r\n\r\n      <FormActions onSubmit={handleSubmit(handleOnSubmit)} />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PushMessagesPage;\r\n"],"names":["PushMessagesPageSchema","Joi","title","required","label","message","handleOpen","snackbarStore","useForm","mode","resolver","joiResolver","reset","register","handleSubmit","errors","formState","useSendGlobalPushMutation","onCompleted","type","SnackbarTypeEnum","sendGlobalPush","className","twClsx","id","error","onSubmit","content","variables","NotificationType"],"sourceRoot":""}